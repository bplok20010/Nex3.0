!function(e){"function"==typeof $define?$define([],function(){e(jQuery)}):e(jQuery)}(function(e){Nex.define("Nex.form.Manager",{singleton:!0,extend:"Nex.EventObject",alias:"Nex.FormManager",configs:function(e){return{fieldList:{}}},isExists:function(t){return e("#"+t).length?!0:!1},add:function(e){var t=this.configs;t.fieldList[Nex.isInstance(e)?e.configs.id:e]=!0},remove:function(e){var t=this.configs;t.fieldList[Nex.isInstance(e)?e.configs.id:e]=null,delete t.fieldList[Nex.isInstance(e)?e.configs.id:e]},get:function(t,n){var o,i=this.configs;if(t===o)return[];var n=Nex.unDefined(n,"default"),r=[],s=i.fieldList;for(var a in s){var d=Nex.getCmp(a);if(d){var l=d.configs,u=l.name,c=String(l.group).split(/\s+|,/);String(u)===String(t)&&-1!==e.inArray(String(n),c)&&r.push(d)}else delete s[a]}return r},find:function(){var e=[];return e=this.get.apply(this,arguments),e.length?e[0]:null},getVal:function(t,n,o){var i=this;("string"!==e.type(n)||""===n)&&(n="default");var r=i.get.apply(i,[t,n]),s=[],o=Nex.unDefined(o,!1);if(e.isArray(r)){e.each(r,function(){var e=this.val();""!==e&&s.push(e)});var a={},d=!1;return e.each(s,function(n,o){e._isPlainObject(o)?(d=!0,e.each(o,function(e,t){a[e]=a[e]||[],a[e].push(t)})):(a[t]=a[t]||[],a[t].push(o))}),d?(s=a,e._isPlainObject(s)&&e.each(s,function(e,t){t=t||[],t[e]=o?t:t.join(",")})):(a[t]=a[t]||[],s=o?a[t]:a[t].join(",")),s}return{}},getValue:function(){return this.getVal.apply(this,arguments)},setVal:function(t,n,o){var i=this,r=i.get.apply(i,[arguments[1],arguments[2]]);return e.isArray(r)?(e.each(r,function(n,o){this.val(e.isArray(t)?Nex.unDefined(t[n],""):t)}),!0):null},setValue:function(){return this.setValue.apply(this,arguments)},getGroup:function(t,n,o){var i=this,r=this.configs,t=Nex.unDefined(t,"default"),n=Nex.unDefined(n,!1),o=Nex.unDefined(o,!1),s=r.fieldList,a=[],d={},l=[];for(var u in s){var c=Nex.getCmp(u);if(c){var f=c.configs,h=f.name,p=f.disabled;if(n||!p){var g=String(f.group).split(/\s+|,/);-1!==e.inArray(String(t),g)&&(l.push(c),o?d[h]||a.push(h):a.push(c),d[h]=!0)}}else delete s[u]}return a.call=function(){var t=[].slice.apply(arguments);if(!t.length)return i;var n=t[0];return t.splice(0,1),e.each(l,function(o,i){i[n]&&e.isFunction(i[n])&&i[n].apply(i,t)}),i},a},getGroupName:function(e,t){return this.getGroup.apply(this,[e,t,!0])},getGroupVal:function(t,n,o){var i=this,t=Nex.unDefined(t,"default"),n=Nex.unDefined(n,!1),r=i.getGroupName(t,n),s={};return e.each(r,function(n,r){var a=i.getVal(r,t,o);e._isPlainObject(a)?e.extend(s,a):s[r]=a}),s},getGroupValue:function(){return this.getGroupVal.apply(this,arguments)},setGroupVal:function(t,n){var o=this,t=t||{};return e.isPlainObject(t)&&!e.isEmptyObject(t)&&e.each(t,function(e,t){o.setVal(t,e,n)}),o},setGroupValue:function(){return this.setGroupVal.apply(this,arguments)},checkGroup:function(e,t){for(var n,o=this,e=Nex.unDefined(e,"default"),t=Nex.unDefined(t,!1),i=o.getGroup(e,t),r=[],s=0;s<i.length;s++){var a=i[s];n=a.checkVal(),n===!1&&r.push(a.C("name"))}return r.length?r:!0},valid:function(e,t){var n=this,o=n.checkGroup(e,t);return o===!0?!0:!1},checkField:function(t,n){var o=this,i=o.get.apply(o,arguments);i=e.isArray(i)?i:[i];var r=!0;return e.each(i,function(e,t){t.checkVal()||(r=!1)}),r},resetGroup:function(e,t){for(var n=this,e=Nex.unDefined(e,"default"),t=Nex.unDefined(t,!1),o=n.getGroup(e,t),i=0;i<o.length;i++){var r=o[i];r.reset()}return n},reset:function(){return this.resetGroup.apply(this,arguments)}})}),Nex.addUtil("Validate",{required:function(e,t){return $.trim(e).length>0},email:function(e,t){return 0==$.trim(e).length||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return 0==$.trim(e).length||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},ip:function(e,t){return 0==$.trim(e).length||/^[\d\.]{7,15}$/.test(e)},qq:function(e,t){return 0==$.trim(e).length||/^[1-9]\d{4,12}$/.test(e)},currency:function(e,t){return 0==$.trim(e).length||/^\d+(\.\d+)?$/.test(e)},mobile:function(e,t){return 0==$.trim(e).length||/^((\(\d{3}\))|(\d{3}\-))?13[0-9]\d{8}?$|15[89]\d{8}?$/.test(e)},phone:function(e,t){return 0==$.trim(e).length||/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/.test(e)},number:function(e,t){return 0==$.trim(e).length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return 0==$.trim(e).length||/^\d+$/.test(e)},creditcard:function(e,t){if(0==$.trim(e).length)return!0;if(/[^0-9 \-]+/.test(e))return!1;var n=0,o=0,i=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--){var s=e.charAt(r);o=parseInt(s,10),i&&(o*=2)>9&&(o-=9),n+=o,i=!i}return n%10===0},rangelength:function(e,t){if(0==$.trim(e).length)return!0;var n=e.split(",").length;return n>=t[0]&&n<=t[1]},min:function(e,t){return 0==$.trim(e).length?!0:e>=t},max:function(e,t){return 0==$.trim(e).length?!0:t>=e},range:function(e,t){return 0==$.trim(e).length?!0:e>=t[0]&&e<=t[1]},equalTo:function(e,t){var n=$(t);return e===n.val()}}),function(e){"function"==typeof $define?$define(["Nex.showat.ShowAt"],function(){e(jQuery)}):e(jQuery)}(function(e){Nex.define("Nex.mixins.DropDown",{dropdownzIndex:999999+Nex.zIndex,configs:function(e){return{multiSplit:",",textKey:"text",valueKey:"value",splitChr:["-",",",";","|"],dropdownHideToRemove:!1,dropdownItems:[],dropdownItemDefault:{},dropdownLoadMsg:"数据加载中...",dropdownLoadWidth:0,dropdownLoadShowAt:{},dropdownAnim:!1,dropdownDuration:200,dropdownEasing:"easeOutQuad",dropdownMode:1,dropdownBorder:!0,dropdownPadding:0,dropdownAutoScroll:!1,dropdownEmptyMsg:"",dropdownCls:"",dropdownShowAt:{},dropdownHeight:"auto",dropdownWidth:"auto",dropdownMaxHeight:0,dropdownMinHeight:0,dropdownMaxWidth:0,dropdownMinWidth:0,dropdownSelectionable:!0,dropdownEdge:5,dropdownItemsFilter:null,dropdownItemFilter:null,dropdownItemFormat:null,dropdownItemNoWrap:!0,dropdownItemTips:!1,dropdownItemTipsTag:"title",dropdownItemTipsFilter:null,dropdownOtherHeight:0,dropdownOtherWidth:0,dropdownSingleSelect:!0,dropdownHideOnClick:!0,dropdownHideOnBlur:!0,dropdownShadowShow:!0,dropdownResetPosDuration:200,dropdownItemTpl:'<div id="<%=id%>" <%=tips%> value="<%=value%>" class="nex-form-dropdown-item <%=selected?"nex-form-dropdown-item-selected":""%> <%=disabled?"nex-form-dropdown-item-disabled":""%> <%=nowrap?"nex-form-dropdown-item-nowrap":""%> <%=cls%>"><%=text%></div>',dropdownItemSplitLineTpl:'<div class="nex-form-item-separator"><div class="nex-form-line-h"></div></div>',"@onDestroy._sysdp":function(){this.destroyDropDown()}}},_getElOffset:function(t){var n=this,o=(n.configs,e(t).offset()),i=e(window).scrollLeft(),r=e(window).scrollTop();return o?o:{left:i,top:r}},_getShowAtSpace:function(t){var n=this,t=(n.configs,Nex.unDefined(t,n.getDropDownShowAt())),o=e(t),i=e(window).width(),r=e(window).height(),s=e._isPlainObject(t)?t:n._getElOffset(o),a=e(window).scrollLeft(),d=e(window).scrollTop(),l={top:s.top-d,left:s.left-a};return l.bottom=r-l.top-(e._isPlainObject(t)?0:o._outerHeight()),l.right=i-l.left-(e._isPlainObject(t)?0:o._outerWidth()),l},getDropDownItems:function(){var e=this.configs;return e.dropdownItems||[]},getDropDownItemDefault:function(){var e=this.configs;return e.dropdownItemDefault},__itemId:1,_parseItemData:function(t){var n=this,o=n.configs,i=o.valueKey,r=o.textKey;if(Nex.isPlainObject(t)&&t.__id)return t;var s={};return Nex.isArray(t)&&t.length?(s[i]=t[0],s[r]=Nex.unDefined(t[1],t[0])):Nex.isPlainObject(t)?(s=e.extend({},t),s[i]=Nex.unDefined(t[i],t[r]),s[r]=Nex.unDefined(t[r],s[i]),s[i]=Nex.unDefined(s[i],""),s[r]=Nex.unDefined(s[r],"")):(s[i]=t+"",s[r]=s[i],-1!==Nex.inArray(s[i],o.splitChr)&&(s.__splitLine=!0)),"__id"in s||(s.__id=o.id+"_item_"+n.__itemId++),e.extend(s,n.getDropDownItemDefault(),s),s},isSplitLine:function(e){var e=e||{};return e.__splitLine?!0:!1},setDropDownItems:function(t){var n=this.configs;t&&(n.dropdownItems=e.isArray(t)?t.concat([]):t),1==n.dropdownMode&&e.isArray(n.dropdownItems)&&e.each(n.dropdownItems,function(e,t){n.dropdownItems[e]=self._parseItemData(t)});var o=self.getDropDown();return o.length&&t&&this.resetDropDownList(n.dropdownItems),n.dropdownItems},getDropDownItemData:function(t,n){var o,i=this,r=i.configs,n=n===o?!0:n,s=i.getDropDownItems(),a=t;if(t===o)return null;"string"===e.type(t)?(t=t.split(r.multiSplit),t.length>1&&(a=t)):"array"!==e.type(t)&&(t=[t]);var d={};e.each(t,function(e,t){d[t]=!0});var l=[];return e.each(s,function(t,o){if(e.isPlainObject(o)){var i=o.value;i in d&&l.push(n?o:t)}}),1===l.length&&"array"!==e.type(a)?l[0]:l},getDropDownItemIndex:function(e){return this.getDropDownItemData(e,!1)},getDropDownItemDataById:function(t){var n,o=this,i=(o.configs,{}),r=o.getDropDownItems();return t===n?i:(e.each(r,function(n,o){if(e.isPlainObject(o)){var r=o.__id;return r===t?(i=o,!1):void 0}}),i)},getDropDownShowAt:function(){return this.getContainer()},showDropDownLoading:function(t,n){var o=this,i=o.configs,t=t||i.dropdownLoadMsg,r=o.getDropDownShowAt(),s=e("#"+i.id+"_dropdown_loading");if(o.__ddt&&clearTimeout(o.__ddt),s.length)s.html(i.dropdownLoadMsg);else{s=e('<div id="'+i.id+'_dropdown_loading" class="nex-form-dropdown-loading">'+t+"</div>"),e(document.body).append(s);var a=r._outerWidth(),d=s._outerWidth(),l=e.isFunction(i.dropdownLoadWidth)?i.dropdownLoadWidth.call(o,i):i.dropdownLoadWidth;l>0?s._outerWidth(l):a>d&&s._outerWidth(a)}return s.showAt(e.extend({at:r,xAlign:"left",yAlign:"bottom",offsetY:-1},i.dropdownLoadShowAt)),e.isFunction(n)&&n.call(o,s),s},__ddt:0,hideDropDownLoading:function(t){var n=this,o=n.configs,i=e("#"+o.id+"_dropdown_loading");return i.length&&(n.__ddt=setTimeout(function(){i.hide(t),n.__ddt=0},0)),n},getDropDown:function(){var t=this,n=t.configs;return e("#"+n.id+"_dropdown")},getDropDownBody:function(){var t=this,n=t.configs;return e("#"+n.id+"_dropdown_body")},getDropDownListItems:function(){var t=this.getDropDownBody();return e(">.nex-form-dropdown-item",t)},getDropDownListSelectedItems:function(){var t=this.getDropDownBody();return e(">.nex-form-dropdown-item-selected",t)},getDropDownListDisabledItems:function(){var t=this.getDropDownBody();return e(">.nex-form-dropdown-item-disabled",t)},createDropDown:function(){var t=this,n=t.configs,o=t.fireEvent("onBeforeCreateDropDwon",[n]);if(o===!1)return t;var i=e("#"+n.id+"_dropdown");if(i.length)return i;var r=[];return r.push('<div id="'+n.id+'_dropdown" class="nex-form-dropdown '+(n.dropdownBorder?"nex-form-dropdown-border":"")+" "+n.dropdownCls+'" tabindex="-1">'),r.push('<div id="'+n.id+'_dropdown_body" class="nex-form-dropdown-body " tabindex="-1" >'),r.push("</div>"),r.push("</div>"),i=e(r.join("")).appendTo(document.body),n.dropdownSelectionable||i.disableSelection(),n.dropdownPadding>0&&e("#"+n.id+"_dropdown_body").css("padding",n.dropdownPadding),t._setDropDownEvent(),t.fireEvent("onCreateDropDwon",[i,n]),i},getDropDownSelectedValue:function(){return null},__dropdownMode:1,createDropDownList:function(t){var n,o=this,i=this.getDropDownSelectedValue(),r=o.configs,s=[],a=r.valueKey,d=r.textKey,t=Nex.unDefined(t,o.getDropDownItems()),l={items:t},u=o.fireEvent("onBeforeCreateDropDwonList",[l,r]);if(u===!1)return o;t=l.items;var c=e("#"+r.id+"_dropdown");c.length||(c=o.createDropDown());var f=e("#"+r.id+"_dropdown_body");if(f.removeClass("nex-form-dropdown-m1 nex-form-dropdown-m2 nex-form-dropdown-auto-scroll"),e.isArray(t)&&1==r.dropdownMode){o.__dropdownMode=1,f.addClass("nex-form-dropdown-m1");var h={};null!==i&&e.each(String(i).split(r.multiSplit),function(e,t){h[t]=!0});for(var p=t.length,g=0;p>g;g++){var m=o._parseItemData(t[g]);m.selected=h[m[a]]?!0:!1,t[g]=m;var v=e.extend({id:t[g].__id,cls:"",selected:!1,disabled:!1,nowrap:r.dropdownItemNoWrap,tips:""},m);if(r.dropdownItemTips){var w=[r.dropdownItemTipsTag,'="'],_=Nex.unDefined(v.tips,v[d]);e.isFunction(r.dropdownItemTipsFilter)&&(_=r.dropdownItemTipsFilter.call(o,_,v)),_&&(_=Nex.htmlEncode(_)),v.tipsMsg=_,v.tipsTag=r.dropdownItemTipsTag,w.push(_),w.push('"'),v.tips=w.join("")}if(v.text=v[d],v.value=Nex.htmlEncode(v[a]),r.dropdownItemFilter&&e.isFunction(r.dropdownItemFilter)){var u=r.dropdownItemFilter.call(o,v);if(u===!1)continue;u!==n&&(v=u)}r.dropdownItemFormat&&e.isFunction(r.dropdownItemFormat)&&(v.text=r.dropdownItemFormat.call(o,v.text,v)||v.text);var u=o.fireEvent("onBeforeDropDownItemCreate",[v,r]);if(u!==!1){var x="";x=o.isSplitLine(v)?o.tpl(r.dropdownItemSplitLineTpl,v):o.tpl(r.dropdownItemTpl,v);var D={itemTpl:x,itemData:v};o.fireEvent("onDropDownItemCreate",[D,r]),s.push(D.itemTpl)}}p||""==r.dropdownEmptyMsg||s.push(r.dropdownEmptyMsg),f.html(s.join(""))}else o.__dropdownMode=2,f.addClass("nex-form-dropdown-m2"),r.dropdownAutoScroll&&f.addClass("nex-form-dropdown-auto-scroll"),f.html(""),Nex.gc(),o.addComponent(f,t);return o.fireEvent("onCreateDropDwonList",[c,o.__dropdownMode,r]),c},resetDropDownList:function(t){var n=this,o=this.configs,t=this._undef(t,this.getDropDownItems());if(e.isFunction(o.dropdownItemsFilter)){var i=o.dropdownItemsFilter.call(n,t);if(i===!1)return n;i!==undef&&(t=i)}var r={items:t},s=n.fireEvent("onResetDropDownList",[r,o]);if(s===!1)return n;t=r.items,e.isArray(t)?n.__CItems=t:n.__CItems.length=0;n.createDropDownList(t);return n.setDropDownSize(),n.__DP_isShow&&n.resetDropDownPos(),n},__CItems:[],_bindCloseDropDownEvents:function(){var t=this,n=(this.getDropDownItems(),t.configs);t.__unbindDropDown(),n.dropdownHideOnBlur&&(e(document).bind("mousewheel.dropdown_"+n.id+" contextmenu.dropdown_"+n.id+" mousedown.dropdown_"+n.id,function(o){var i=o.target||o.srcElement;e(i).is("#"+n.id)||e(i).is("#"+n.id+"_dropdown")||e(i).parents("#"+n.id+"_dropdown,#"+n.id).length||t.hideDropDown()}),e(window).bind("resize.dropdown_"+n.id,function(){t.hideDropDown()})),e(document).bind("keydown.dropdown_"+n.id,function(o){var i=e("#"+n.id+"_dropdown_body"),r=i.find(">.nex-form-dropdown-item-over:last"),s=!1;if(r.length||(r=i.find(">.nex-form-dropdown-item-selected:last"),r.length||(r=i.find(">.nex-form-dropdown-item:first"),s=!0)),r.length){var a=r;switch(o.keyCode){case 38:for(i.find(">.nex-form-dropdown-item").removeClass("nex-form-dropdown-item-over");;){var d=s?r:r.prev();if(d.length){if(!d.hasClass("nex-form-dropdown-item")){r=d;continue}if(d.hasClass("nex-form-dropdown-item-disabled")){if(r=d,s)break;s=!1;continue}r=d,a=d}else if(d=a,!d.hasClass("nex-form-dropdown-item")){r=d,s=!1;break}s=!1;var l=d.length?d:a,u=l.attr("id"),c=t.__getItemData(u),f=t.fireEvent("onDropDownItemForward",[c,l[0],o,n]);f!==!1&&l.addClass("nex-form-dropdown-item-over"),c&&t.scrollToItem(c);break}break;case 40:for(i.find(">.nex-form-dropdown-item").removeClass("nex-form-dropdown-item-over");;){var h=s?r:r.next();if(s=!1,h.length){if(!h.hasClass("nex-form-dropdown-item")){r=h;continue}if(h.hasClass("nex-form-dropdown-item-disabled")){r=h;continue}r=h,a=h}else if(h=a,!h.hasClass("nex-form-dropdown-item")){r=h,s=!1;break}var l=h.length?h:a,u=l.attr("id"),c=t.__getItemData(u),f=t.fireEvent("onDropDownItemForward",[c,l[0],o,n]);f!==!1&&l.addClass("nex-form-dropdown-item-over"),c&&t.scrollToItem(c);break}break;case 13:t.__dp_click(i.find(">.nex-form-dropdown-item-over"),o)}}})},setDropDownList:function(e){return this.__DP_isShow?this.resetDropDownList(e):0,this},resetDropDownSizeAndPos:function(){this.__DP_isShow&&(this.resetDropDownSize(),this.resetDropDownPos())},__DP_isShow:!1,showDropDown:function(t,n){var o,i=this,r=i.configs,s=t?!0:!1,t=this._undef(t,this.getDropDownItems());if(i.__DP_isShow&&s)return i.resetDropDownList(t),i;if(e.isFunction(r.dropdownItemsFilter)){var a=r.dropdownItemsFilter.call(i,t);if(a===!1)return i;a!==o&&(t=a)}var d={items:t},l=i.fireEvent("onBeforeDropDownShow",[d,r]);if(l===!1)return i;if(!r.dropdownHideToRemove){var u=i.getDropDown();if(u.length){if(1==i.__dropdownMode){var c=i.getDropDownSelectedValue();null!==c&&i.dropdownSelectItems(c)}return i.setDropDownSize(),i._showDropDown(null,u),i}}t=d.items,i.__CItems=[],e.isArray(t)?i.__CItems=t:i.__CItems.length=0;var u=e("#"+r.id+"_dropdown");u.length||(u=i.createDropDown()),e.isArray(t)&&1==r.dropdownMode?i.__dropdownMode=1:(i.__dropdownMode=2,i._setDropDownSize2());var u=i.createDropDownList(t);return 1==i.__dropdownMode&&i._setDropDownSize1(),i._showDropDown(n,u),i},_showDropDown:function(t,n){var o=this,i=o.configs,r=function(){o.fireEvent("onDropDownShow",[i]),e.isFunction(t)&&t.call(o),i.dropdownShadowShow&&o.dropdownShadowShow(),o.__DP_isShow=!0,o._bindCloseDropDownEvents()};if(1==o.__dropdownMode){var s=e("#"+i.id+"_dropdown_body").find(">.nex-form-dropdown-item-selected:last");s.length&&o.scrollToItemById(s.attr("id"))}var a=n||o.getDropDown();o.__DP_isShow=!0;var d=Nex.mixins.DropDown.dropdownzIndex+2;return o.dropdownzIndex=d,a.css("zIndex",d),i.dropdownAnim?o._animateDropDownShow(r):o._defaultDropDownShow(r),o},removeDropDown:function(){return this.hideDropDown.apply(this,arguments)},hideDropDown:function(t){var n,o=this,i=o.configs,n=function(){i.dropdownShadowShow&&o.hideDropDownShadow(),o.fireEvent("onDropDownHide",[i]),e.isFunction(t)&&t.call(o),o.__DP_isShow=!1},r=o.fireEvent("onBeforeDropDownHide",[i]);return r===!1?o:(o.__DP_isShow=!1,o.unsetDropDownEvent(),i.dropdownAnim?o._animateDropDownHide(n):o._defaultDropDownHide(n),o)},__unbindDropDown:function(){var t=this.configs;e(document).unbind(".dropdown_"+t.id),e(window).unbind(".dropdown_"+t.id)},isDropDownCreate:function(){var t=this.configs,n=e("#"+t.id+"_dropdown");return n.length?!0:!1},isDropDownShow:function(){return this.__DP_isShow},toggleDropDown:function(e){{var t=this;t.configs}return t.__DP_isShow?t.hideDropDown(e):t.showDropDown(e),t},_getDropDownOtherHeight:function(){return this.configs.dropdownOtherHeight},_getDropDownOtherWidth:function(){return this.configs.dropdownOtherWidth},__DP_autoWidth:!1,__DP_autoHeight:!1,_setDropDownSize1:function(){var t=this,n=t.configs,o=t.getDropDownShowAt(),i=t._getShowAtSpace(o);i.bottom-=n.dropdownEdge,i.top-=n.dropdownEdge,i.left-=n.dropdownEdge,i.right-=n.dropdownEdge;var r=e("#"+n.id+"_dropdown"),s=e("#"+n.id+"_dropdown_body"),a=(parseInt(r.css("paddingTop"))||0)+(parseInt(r.css("paddingBottomWidth"))||0)+(parseInt(r.css("borderTop"))||0)+(parseInt(r.css("borderBottomWidth"))||0),d=(parseInt(r.css("paddingLeft"))||0)+(parseInt(r.css("paddingRight"))||0)+(parseInt(r.css("borderLeftWidth"))||0)+(parseInt(r.css("borderRightWidth"))||0);s._removeStyle("width height");var l=e(window).width()-n.dropdownEdge,u=e.isFunction(n.dropdownWidth)?n.dropdownWidth.call(t,n):n.dropdownWidth,c=e.isFunction(n.dropdownHeight)?n.dropdownHeight.call(t,n):n.dropdownHeight;"auto"==u&&r._removeStyle("width"),"auto"==c&&r._removeStyle("height"),u="auto"==u?0:u,c="auto"==c?0:c;var f=!1,h=!1,p=s.outerHeight()+a,g=c>0?c:p,m=e.isFunction(n.dropdownMaxHeight)?n.dropdownMaxHeight.call(t,n):n.dropdownMaxHeight,v=e.isFunction(n.dropdownMinHeight)?n.dropdownMinHeight.call(t,n):n.dropdownMinHeight;g=Math.min(g,Math.max(i.bottom,i.top)),v>0&&(g=Math.max(g,v)),m>0&&(g=Math.min(g,m)),f=!0,0!=c||g!=p?(f=!1,r._outerHeight(g),s._outerHeight(r.height()-t._getDropDownOtherHeight())):r._removeStyle("height");var w=s.outerWidth()+d,_=u>0?u:w,x=e.isFunction(n.dropdownMaxWidth)?n.dropdownMaxWidth.call(t,n):n.dropdownMaxWidth,D=e.isFunction(n.dropdownMinWidth)?n.dropdownMinWidth.call(t,n):n.dropdownMinWidth;if(D=D>0?D:o._outerWidth(),_=Math.max(_,D),_=Math.min(_,l),x>0&&(_=Math.min(_,x)),h=!0,0!=u||_!=w)h=!1,r._outerWidth(_),s._outerWidth(r.width()-t._getDropDownOtherWidth());else{r._removeStyle("width");var b=Nex.hasScroll(s,"top");if(b){h=!1;var y=t.getScrollbarSize();_+=y.y+t._getDropDownOtherWidth(),_=Math.min(_,l),r._outerWidth(_),s._outerWidth(r.width())}}return t.__DP_autoWidth=h,t.__DP_autoHeight=f,t.fireEvent("onSetDropDownSize",[r,1,n]),t},_setDropDownSize2:function(){var t=this,n=t.configs,o=t.getDropDownShowAt(),i=e("#"+n.id+"_dropdown"),r=e("#"+n.id+"_dropdown_body"),s=e(window).width()-n.dropdownEdge,a=e(window).height()-n.dropdownEdge,d=e.isFunction(n.dropdownWidth)?n.dropdownWidth.call(t,n):n.dropdownWidth,l=e.isFunction(n.dropdownHeight)?n.dropdownHeight.call(t,n):n.dropdownHeight;inputW=o._outerWidth(),0==d&&(d=inputW),l=parseInt(l,10),l=isNaN(l)?0:l;var u=!1,c=!1;return 0==l||"auto"==l?(i._removeStyle("height"),r._removeStyle("height"),u=!0,i.outerHeight()>a&&(i._outerHeight(a),r._outerHeight(i.height()-t._getDropDownOtherHeight()),u=!1)):(u=!1,i._outerHeight(l),r._outerHeight(i.height()-t._getDropDownOtherHeight())),"auto"==d?(c=!0,i._removeStyle("width"),r._removeStyle("width"),i.outerWidth()>s&&(c=!1,i._outerHeight(s),r._outerHeight(i.width()-t._getDropDownOtherWidth()))):(c=!1,d=parseInt(d,10),d=isNaN(d)?inputW:d,i._outerWidth(d),r._outerWidth(i.width()-t._getDropDownOtherWidth())),t.__DP_autoWidth=c,t.__DP_autoHeight=u,t.fireEvent("onSetDropDownSize",[i,2,n]),t},setDropDownSize:function(){{var e=this;e.configs}return 2==e.__dropdownMode?e._setDropDownSize2():e._setDropDownSize1()},resetDropDownSize:function(){return this.setDropDownSize()},__dp_click:function(t,n){var o=this,i=this.configs,r=e(t),s=r.attr("id"),a=o.__getItemData(s);if(!a.disabled&&!r.hasClass("nex-form-dropdown-item-disabled")){var d=o.fireEvent("onDropDownItemClick",[a,t,n,i]);d!==!1&&o._dropdownItemsSelect(a,t,n)}},dropdownSelectItems:function(t){var n=this,o=this.configs,i=o.multiSplit,r=e("#"+o.id+"_dropdown_body"),s=String(t).split(i),a={};return e.each(s,function(e,t){a[t]=!0}),e(">.nex-form-dropdown-item",r).each(function(){var t=e(this).attr("value");t in a?e(this).addClass("nex-form-dropdown-item-selected"):e(this).removeClass("nex-form-dropdown-item-selected")}),n},_dropdownItemsSelect:function(t,n,o){var i=this,r=this.configs,s=e(n),a=s.hasClass("nex-form-dropdown-item-selected");if(r.dropdownSingleSelect){if(a)return;i.unselectDropDownAll(),s.addClass("nex-form-dropdown-item-selected"),r.dropdownHideOnClick&&i.hideDropDown(),i.fireEvent("onDropDownItemSelected",[t,n,o,r]),i.fireEvent("onDropDownItemSelectedChange",[t[r.valueKey],t[r.textKey],t,n,o,r])}else{var d=r.multiSplit,l=e("#"+r.id+"_dropdown_body"),u=[],c=[];a?(s.removeClass("nex-form-dropdown-item-selected"),i.fireEvent("onDropDownItemUnSelected",[t,n,o,r])):(s.addClass("nex-form-dropdown-item-selected"),i.fireEvent("onDropDownItemSelected",[t,n,o,r])),e(">.nex-form-dropdown-item-selected",l).each(function(){u.push(e(this).attr("value"))}),e.each(u,function(e,t){var n=i.__getItemData(t,!1);c.push(n?n[r.textKey]:t)}),i.fireEvent("onDropDownItemSelectedChange",[u.join(d),c.join(d),t,n,o,r])}},__getItemData:function(t,n){var o=this,i=this.getDropDownItems(),r=o.configs,n=Nex.unDefined(n,!0),s=null;return e.each(i.concat(o.__CItems),function(o,i){if(e.isPlainObject(i)){var a=n?i.__id:i[r.valueKey];return String(a)===String(t)?(s=i,!1):void 0}}),s},_setDropDownEvent:function(){var t=this,n=t.configs,o=e("#"+n.id+"_dropdown_body"),i=function(e){return t.__getItemData(e)},r=function(e){t.__dp_click(this,e)};return o.undelegate(">.nex-form-dropdown-item").delegate(">.nex-form-dropdown-item",{mouseenter:function(o){var r=e(this),s=r.attr("id"),a=i(s);if(!a.disabled&&!r.hasClass("nex-form-dropdown-item-disabled")){var d=t.fireEvent("onDropDownItemOver",[a,this,o,n]);d!==!1&&r.addClass("nex-form-dropdown-item-over")}},mouseleave:function(o){var r=e(this),s=r.attr("id"),a=i(s);if(!a.disabled&&!r.hasClass("nex-form-dropdown-item-disabled")){var d=t.fireEvent("onDropDownItemOut",[a,this,o,n]);d!==!1&&r.removeClass("nex-form-dropdown-item-over")}},click:r}),t.unsetDropDownEvent(),t.fireEvent("onSetDropDownEvent",[n]),t},scrollToItem:function(t){var n=this,o=n.configs,i=n.getDropDownItems(),r="";"object"==typeof t&&(t=t[o.valueKey]);for(var s=0;s<i.length;s++)if(i[s].value+""==t+""){r=i[s].__id;break}if(!r)return n;var a=e("#"+o.id+"_dropdown_body");if(!a.length)return n;var d=a.offset(),l=a._outerHeight(),u=e("#"+r);if(!u.length)return n;var c=u.offset(),f=u._outerHeight(),h=0;d.top>c.top?h=d.top-c.top:d.top+l<c.top+f&&(h=d.top+l-(c.top+f));var p=0;return p=a.scrollTop()-h,a.scrollTop(p),n},scrollToItemById:function(e){var t=this,n=(t.configs,t.__getItemData(e));return n&&t.scrollToItem(n),t},unsetDropDownEvent:function(){var e=this,t=e.configs;return e.fireEvent("onUnsetDropDownEvent",[t]),e.__unbindDropDown(),e},unselectDropDownAll:function(){var t=this,n=t.configs,o=t.getDropDownItems();return e.each(o.concat(t.__CItems),function(e,t){"object"==typeof t&&(t.selected=!1)}),e("#"+n.id+"_dropdown_body").find(">.nex-form-dropdown-item-selected").removeClass("nex-form-dropdown-item-selected"),t},__DP_ShowAlign:"bottom",_defaultDropDownShow:function(t){var n,o=this,i=o.configs,r=e("#"+i.id+"_dropdown");n=e.isFunction(t)?t:null,r._show(),r._visible(!0);var s=o.getDropDownShowAt();return r.showAt(e.extend({at:s,visibleEdge:i.dropdownEdge,xAlign:"left",yAlign:"bottom",offsetY:0,autoShow:!0,"onShow.dropdown":function(e,t){o.__DP_ShowAlign=t.yAlign,r.removeClass("nex-form-dropdown-"+t.yAlign),r.addClass("nex-form-dropdown-"+t.yAlign)}},i.dropdownShowAt)),e.isFunction(n)&&n.call(o,r),o},resetDropDownPos:function(){var t=this,n=t.configs,o=e("#"+n.id+"_dropdown"),i=t.getDropDownShowAt(),r=Nex.Create("showAt",e.extend({at:i,visibleEdge:n.dropdownEdge,xAlign:"left",yAlign:"bottom",offsetY:0},n.dropdownShowAt,{el:o,autoShow:!1})),s=r.getShowPos(),a=r.C("yAlign");t.__DP_ShowAlign=a;var d=null;return n.dropdownShadowShow&&(d=t.getDropDownShadow(),d.hide()),o.stop(!0,!0).animate(s,n.dropdownResetPosDuration,function(){n.dropdownShadowShow&&d&&d.show(),t.resetDropDownShadow()}),t},_defaultDropDownHide:function(t){var n=this,o=n.configs;n.__DP_isShow=!1;var i=e("#"+o.id+"_dropdown");return i.stop(!0,!0)._visible(!1)._hide(),o.dropdownHideToRemove&&i.remove(),e.isFunction(t)&&t.call(n),n},_animateDropDownShow:function(t){var n,o=this,i=o.configs,r=e("#"+i.id+"_dropdown"),s=e("#"+i.id+"_dropdown_body");n=e.isFunction(t)?t:null,r._show(),r._visible(!0);var a=o.getDropDownShowAt(),d=Nex.Create("showAt",e.extend({at:a,visibleEdge:i.dropdownEdge,xAlign:"left",yAlign:"bottom",offsetY:0,"onShow.dropdown":function(e,t){o.__DP_ShowAlign=t.yAlign,r.removeClass("nex-form-dropdown-"+t.yAlign),r.addClass("nex-form-dropdown-"+t.yAlign)}},i.dropdownShowAt,{el:r,autoShow:!1})),l=d.getShowPos(),u=d.C("yAlign");o.__DP_ShowAlign=u,r.removeClass("nex-form-dropdown-"+u),r.addClass("nex-form-dropdown-"+u);var c=r.height(),f=r.outerHeight();o.__DP_autoWidth&&r.width(r.width()),r.height(0),s.addClass("nex-form-dropdown-anim-"+u);var h=function(){o.__DP_ShowAlign=u,r.removeClass("nex-form-dropdown-"+u),r.addClass("nex-form-dropdown-"+u),s.removeClass("nex-form-dropdown-anim-"+u),o.__DP_autoWidth&&r._removeStyle("width"),o.__DP_autoHeight&&r._removeStyle("height"),e.isFunction(n)&&n.call(o,r)};if("bottom"===u)r.css(l),r.stop(!0,!0).animate({height:c},i.dropdownDuration,i.dropdownEasing,h);else{var p={left:l.left,top:l.top+f};r.css(p),r.stop(!0,!0).animate({height:c,top:l.top},i.dropdownDuration,i.dropdownEasing,h)}return o},_animateDropDownHide:function(e){return this._defaultDropDownHide.apply(this,arguments)},dropdownShadowShow:function(){var t=this,n=t.configs,o=t.fireEvent("onBeforeDropDownShadowShow",[n]);if(o===!1)return t;var i=e("#"+n.id+"_dropdown_shadow");i.length||(i=e('<div id="'+n.id+'_dropdown_shadow" class="nex-form-dropdown-shadow">'+(Nex.IEVer<=8?'<iframe style="width:99%;height:99%;"></iframe>':"")+"</div>").appendTo(document.body)),i.show();var r=t.getDropDown();return i._width(r.outerWidth()),i._height(r.outerHeight()),i.css(r.offset()).css("zIndex",t.dropdownzIndex-1),t.fireEvent("onDropDownShadowShow",[n]),i.removeClass("nex-form-dropdown-shadow-top nex-form-dropdown-shadow-bottom"),i.addClass("nex-form-dropdown-shadow-"+t.__DP_ShowAlign),t},resetDropDownShadow:function(){var t=this,n=t.configs,o=e("#"+n.id+"_dropdown_shadow"),i=t.getDropDown();return o._width(i.outerWidth()),o._height(i.outerHeight()),o.css(i.offset()),o.removeClass("nex-form-dropdown-shadow-top nex-form-dropdown-shadow-bottom"),o.addClass("nex-form-dropdown-shadow-"+t.__DP_ShowAlign),t},hideDropDownShadow:function(){var t=this,n=t.configs,o=t.fireEvent("onBeforeDropDownShadowHide",[n]);if(o===!1)return t;var i=e("#"+n.id+"_dropdown_shadow");return n.dropdownHideToRemove?i.remove():i.hide(),t.fireEvent("onDropDownShadowHide",[n]),t},getDropDownShadow:function(){var t=this,n=t.configs;return e("#"+n.id+"_dropdown_shadow")},destroyDropDown:function(){this.isDropDownShow()&&this.hideDropDown();var e=this.getDropDown(),t=this.getDropDownShadow();return e.remove(),t.remove(),this.__DP_isShow=!1,this.__unbindDropDown(),this}})}),function(e){"function"==typeof $define?$define(["Nex.form.Manager","Nex.util.Validate","Nex.container.Container","Nex.mixins.DropDown"],function(){e(jQuery)}):e(jQuery)}(function(e){var t=Nex.define("Nex.form.AbstractForm","Nex.container.Container",{alias:"Nex.Form Nex.form.AbstractForm",xtype:"form abstractform",mixins:["Nex.mixins.DropDown"]});Nex.form.Form=t,t.addStatics({FormManager:Nex.FormManager,dropdownzIndex:999999+Nex.zIndex}),t.setOptions(function(e){return{prefix:"nexform-",renderTo:document.body,disabledItems:!0,autoDestroy:!0,autoResize:!0,_hasBodyView:!1,_checkScrollBar:!1,denyEvents:!0,autoWidthCls:[e.autoWidthCls,"nex-form-auto-width"].join(" "),autoHeightCls:[e.autoHeightCls,"nex-form-auto-height"].join(" "),borderCls:[e.borderCls,"nex-form-border"].join(" "),containerCls:[e.containerCls,"nex-form"].join(" "),autoScroll:!1,autoScrollCls:"",autoFocus:!1,tabIndex:!1,multiSplit:",",__inputType:"text",showLabel:"auto",labelCls:"",labelStyle:{},labelvAlign:"top",labelPosition:"left",labelAlign:"left",labelText:"",labelWidth:80,showPlaceholder:!0,placeholder:"",autocomplete:"off",display:"inline",group:"default",name:"",value:"",_value:"",inputTextChangeEvent:"onChange",triggerBtnsPosition:"inner",triggerBtns:[],triggerBtnSelection:!1,triggerToFocus:!1,cleanBtn:!1,cleanDefault:"",inputAttrs:{},formater:null,getFormater:null,setFormater:null,renderer:{},_renderer:{},
rendererDef:"_default_",validator:Nex.formValid||{},rules:[],showVaildMsg:!0,vaildMsgPosition:"right",validMsg:"",validMsgOnFocus:"",validErrorMsg:"请填写正确信息！",validSuccessMsg:"通过信息验证！",messages:{},validErrorCls:"nex-form-valid-error",validSuccessCls:"nex-form-valid-success",textKey:"text",valueKey:"value",items:[],splitChr:["-",",",";","|"],_item:{cls:"",text:"",value:"",readOnly:!1,disabled:!1,selected:!1,title:"",display:"inline-block"},itemDefault:{},showItemsLoading:!1,_ajaxOptions:{dataType:"json",type:"GET"},ajaxOptions:{},width:150,height:"auto",autoValidDelay:50,autoValidEvents:["onChange","onBlur","onPaste"],disabled:!1,readOnly:!1,cls:"",overCls:"",focusCls:"",disabledCls:"",readonlyCls:"",dropdownMinWidth:0,tpl:{inputTpl:'<div <%=attrs%> id="<%=id%>-input" type="<%=type%>" name="<%=name%>" autocomplete="<%=autocomplete%>" tabindex=<%=tabIndex%> value="" class="nex-form-field nex-form-field-<%=type%>"></div>',formTpl:'<table id="<%=id%>-inner" class="nex-field nex-form-inner" cellspacing="0" cellpadding="0" ><tbody><tr id="<%=id%>-inputRow"><td class="nex-form-inner-body" id="<%=id%>-body-td"><div id="<%=id%>-body" class="nex-form-body">__inputTpl__<label id="<%=id%>-placeholder" class="nex-form-placeholder"><%=placeholder%></label><div id="<%=id%>-trigger-body" class="nex-form-trigger-body"></div></div></td></tr></tbody></table>'},events:{}}}),t.override({_triggerID:1,initComponent:function(){var e=this,t=this.configs;e.callParent(arguments),e._checkOptions(t)._setFormView().initFormField()},initFormField:function(){{var e=this;this.configs}e.checkLabelSet()},onCreate:function(){var e=this;e.callParent(arguments),Nex.FormManager&&Nex.FormManager.add(e),e._afterCreate()},_checkOptions:function(e){return this.el.addClass("nex-form-display-"+e.display),Nex.isArray(e.items)&&(e.items=e.items.concat([])),this},sysEvents:function(){var e=this,t=e.configs;e.callParent(arguments),e.bind("onMouseOver._sys",e._setOverCls,e),e.bind("onMouseOut._sys",e._unsetOverCls,e),e.bind("onFocus._sys",e._setFocusCls,e),e.bind("onBlur._sys",e._unsetFocusCls,e),e.bind("onChange._sys",e._triggerPlaceholder,e),e.bind("onBlur._sys",e.refreshFormater,e),e.bind("onBlur._sys",e.refreshRenderer,e),e.bind("onValidError._sys",e.setValidError,e),e.bind("onValidSuccess._sys",e.setValidSuccess,e);for(var n=0;n<t.autoValidEvents.length;n++){e.bind(t.autoValidEvents[n],e._autoValid,e)}return e.bind("onDropDownItemSelectedChange._sys",e._setDropDownValue,e),e},formTpl:function(e){var t=[];return t.join("")},_getFormTpl:function(){var t=this,n=t.configs,o=e.extend({},n),i=[];e.isPlainObject(o.inputAttrs)&&e.each(o.inputAttrs,function(e,t){i.push(e+"="+t)}),i.join(" "),o.attrs=i,o.tabIndex=++Nex.tabIndex,o.placeholder=n.placeholder,o.type=n.__inputType;var r=n.tpl.inputTpl||"",s=n.tpl.formTpl||"";return s=s.replace(/__inputTpl__/gi,r),t.tpl(s,o)},getBody:function(){var t=this,n=t.configs;return e("#"+n.id+"-body")},_setFormView:function(){var t=this,n=t.configs,o=n.views.container;return o.html(t._getFormTpl()),n.views.body=e("#"+n.id+"_body"),t._setSysTriggerBtns(),t._setTriggerBtns(),t._bindEvent(),t.fireEvent("onSetFormView",[n]),t},_setSysTriggerBtns:function(){var e=this,t=e.configs;if(t.cleanBtn){var n=t.cleanDefault;e.addInnerTriggerBtn({cls:"nex-form-clear-trigger",iconCls:"nex-form-clear-icon",callBack:function(){var o=e.getInputText();e.val(n);var i=e.getInputText();t.inputTextChangeEvent&&e.fireEvent(t.inputTextChangeEvent,[i,o]),e.fireEvent("onTextChange",[i,o]),e.fireEvent("onClean",[i,o]),t.triggerToFocus||e.focus()}})}return e},_setTriggerBtns:function(){var t=this,n=t.configs,o="inner"===n.triggerBtnsPosition?"addInnerTriggerBtn":"addOuterTriggerBtn";e.each(n.triggerBtns,function(n,i){e.isArray(i)&&i.length>1?t[o].call(t,i[0],i[1]):t[o].call(t,i)})},doSetViewSize:function(){var t=this,n=t.configs,o=n.views.container,i=n.views.body,r=t.getInput();if(t.callParent(arguments),!t.isAutoWidth()){r.width(0);var s=e("#"+n.id+"-inputRow"),a=0;e(">td",s).not(".nex-form-inner-body").each(function(){a+=e(this)._outerWidth()}),r._outerWidth(o.width()-a)}t.isAutoHeight()||i._outerHeight(o.height())},_setLabel:function(){var t=this,n=[],o=t.configs,i=e("#"+o.id+"-label-td");i.size()&&i.remove(),n.push('<td valign="'+o.labelvAlign+'" align="'+o.labelAlign+'" id="'+o.id+'-label-td" class="nex-form-inner-label nex-form-inner-label-'+o.labelvAlign+'">'),n.push('<label id="'+o.id+'-label" class="nex-form-label '+o.labelCls+'"></label>'),n.push("</td>");var r=e(n.join(""));return e("#"+o.id+"-body-td").before(r),e("#"+o.id+"-label").css(o.labelStyle),t},setLabel:function(){return this._setLabel()},_setLabelPosition:function(t){var n,o=this,i=o.configs,t=t===n?"left":t,r={left:!0,top:!0,bottom:!0,right:!0};t=r[t]?t:"left",i.labelPosition=t;var s=e("#"+i.id+"-label-td"),a=e("#"+i.id+"-inputRow");e("#"+i.id+"-label-tb").remove();var d=null;return-1!==e.inArray(t,["top","bottom"])&&(d=e('<tr id="'+i.id+'-label-tb"></tr>')),"left"===t?e("#"+i.id+"-body-td").before(s):"right"===t?e(">td:last",a).after(s):"top"===t?d&&(a.before(d),d.append(s)):d&&(a.after(d),d.append(s)),e("#"+i.id+"-label").removeClass("nex-form-label-left nex-form-label-right nex-form-label-top nex-form-label-bottom").addClass("nex-form-label-"+t),o},setLabelPosition:function(e){return this._setLabelPosition(e),this._setLabelWidth(this.configs.labelWidth),this.resetViewSize(),this},_setLabelText:function(t){var n=this.configs,o=e("#"+n.id+"-label");return o.empty(),this.renderComponent(t||n.labelText,o),this},setLabelText:function(e){return this._setLabelText(e),this},_setLabelWidth:function(t){var n=this.configs,o=e("#"+n.id+"-label");return"left"==n.labelPosition||"right"==n.labelPosition?o._outerWidth(t||n.labelWidth):o._removeStyle("width"),this},setLabelWidth:function(e){return this._setLabelWidth(e),this.resetViewSize(),this},checkLabelSet:function(){var e=this,t=this.configs,n=t.showLabel;return"auto"===n&&(n=""===t.labelText?!1:!0),n?(e._setLabel()._setLabelPosition(t.labelPosition)._setLabelWidth(t.labelWidth)._setLabelText(t.labelText),e):e},_afterCreate:function(){var e=this,t=e.configs;t.disabled&&e._disabled(),t.readOnly&&e._readOnly(!0),t.autoFocus&&e.focus(),t._value=t.value,""!==t.value?(e.lockEvent("onChange"),e.setValue(t.value),e.unLockEvent("onChange"),e.fireEvent("onInitChange",[t.value,""]),t.showPlaceholder&&e.hidePlaceholder()):t.showPlaceholder&&e.showPlaceholder()},_appendContent:function(){},__placeholderShow:!1,_triggerPlaceholder:function(e){this.configs.showPlaceholder&&(""===e?this.showPlaceholder():this.hidePlaceholder())},getPlaceholder:function(){var t=this.configs,n=e("#"+t.id+"-placeholder");return n},getPlaceholderText:function(){return this.configs.placeholder},setPlaceholder:function(e){var e=this._undef(e,"");return""!==e&&(this.configs.placeholder=e,this.getPlaceholder().html(e)),this},showPlaceholder:function(){return this.__placeholderShow||this.getPlaceholder().addClass("nex-form-placeholder-show"),this.__placeholderShow=!0,this.el.addClass("nex-form-empty"),this},hidePlaceholder:function(){return this.__placeholderShow&&this.getPlaceholder().removeClass("nex-form-placeholder-show"),this.__placeholderShow=!1,this.el.removeClass("nex-form-empty"),this},__input:null,getInput:function(){var t=this,n=t.configs;return t.__input=t.__input?t.__input:e("#"+n.id+"-input"),t.__input},__inputreal:null,getInputReal:function(){var t=this,n=t.configs;return t.__inputreal=t.__inputreal?t.__inputreal:e("#"+n.id+"-input"),t.__inputreal},_isInput:function(t){return e(t).is(":input")},getInputValue:function(){var e=this,t=(e.configs,e.getInputReal()),n=e._isInput(t)?t.val():t.html();return n},setInputValue:function(e){var t=this,n=(t.configs,t.getInputReal());return t._isInput(n)?n.val(e):n.html(e),t.currentValue=e,t},getInputWidth:function(){return this.getInput()._outerWidth()},getInputText:function(){var t=this,n=(t.configs,t.getInput()),o=t._isInput(n)?n.val():n.html();return e.trim(o)},setInputText:function(e){var t=this,n=(t.configs,t.getInput());return t._isInput(n)?n.val(e):n.html(e),t},currentValue:"",getValue:function(){var t,n=this,o=n.configs,i=e.trim(n.rendererDecode(n.getInputValue()));if(e.isFunction(o.getFormater)){var r=o.getFormater.call(n,i);i=r===t?i:r}var s={value:i};return n.fireEvent("onGetValue",[s]),n.currentValue=s.value,s.value},_oldValue:null,setValue:function(){var t,n=this,o=this.configs,i=[].slice.apply(arguments),r=null===n._oldValue?n.getValue():n._oldValue;if(n._oldValue=r,n.fireEvent("onSetValue",[i]),e.isFunction(o.setFormater)){var s=o.setFormater.apply(n,i);s!==t&&(e.isArray(s)||(i=[s]))}if(e.isFunction(o.formater)){var s=o.formater.apply(n,i);s!==t&&(e.isArray(s)||(i=[s]))}if(!i.length)return n;var a=i[0]+"";i[0]=n.rendererEncode(i[0]),n.setInputValue.apply(n,i);var d=a;return r!==d&&null!==n._oldValue&&(n._oldValue=null,o.value=d,n.fireEvent("onChange",[d,r])),n},val:function(){{var e=this;e.configs}return arguments.length?e.setValue.apply(e,arguments):e.getValue()},__isFocus:!1,_focusValue:null,_bindInputEvent:function(){var t=this,n=t.configs,o=e("#"+n.id+"-input"),i=n.inputTextChangeEvent,r={click:function(e){if(!n.disabled&&!n.readOnly){var o=t.fireEvent("onClick",[this,e]);return o===!1?!1:void 0}},focus:function(i){if(!n.disabled&&!n.readOnly&&(t._focusValue=t.getInputText(),o.addClass("nex-form-field-focus"),e("#"+n.id).addClass("nex-form-focus"),!t.__isFocus)){var r=t.fireEvent("onFocus",[this,i]);if(t.__isFocus=!0,r===!1)return!1}},blur:function(r){if(t.__isFocus=!1,!n.disabled&&!n.readOnly){var s=t._focusValue,a=t.getInputText();o.removeClass("nex-form-field-focus"),e("#"+n.id).removeClass("nex-form-focus"),s!==a&&(n.value=a,i&&t.fireEvent(i,[a,s]),t.fireEvent("onTextChange",[a,s]));var d=t.fireEvent("onBlur",[this,r]);return d===!1?!1:void 0}},keydown:function(e){if(!n.disabled&&!n.readOnly){t._oldValue=null===t._oldValue?t.getInputText():t._oldValue;var o=t.fireEvent("onKeyDown",[this,e]);return o===!1?!1:void 0}},keyup:function(e){if(!n.disabled&&!n.readOnly){var o=t._oldValue,r=t.getInputText();o!==r&&null!==t._oldValue&&(n.value=r,t._focusValue=r,i&&t.fireEvent(i,[r,o]),t.fireEvent("onTextChange",[r,o]),t._oldValue=null);var s=t.fireEvent("onKeyUp",[this,e]);return s===!1?!1:void 0}},keypress:function(e){if(!n.disabled&&!n.readOnly){var o=t.fireEvent("onKeyPress",[this,e]);return o===!1?!1:void 0}},mouseenter:function(e){if(!n.disabled&&!n.readOnly){var o=t.fireEvent("onMouseOver",[this,e]);return o===!1?!1:void 0}},mouseleave:function(e){if(!n.disabled&&!n.readOnly){var o=t.fireEvent("onMouseOut",[this,e]);return o===!1?!1:void 0}},paste:function(e){if(!n.disabled&&!n.readOnly){var o=t.fireEvent("onPaste",[this,e]);return o===!1?!1:void 0}},mousedown:function(e){if(!n.disabled&&!n.readOnly){var o=t.fireEvent("onMouseDown",[this,e]);return o===!1?!1:void 0}},mouseup:function(e){if(!n.disabled&&!n.readOnly){var o=t.fireEvent("onMouseUp",[this,e]);return o===!1?!1:void 0}}};o.bind(r)},_bindEvent:function(){var t=this,n=t.configs,o=t.el,i=e("#"+n.id+"-inputRow"),r=e("#"+n.id+"-input"),s=e("#"+n.id+"-body"),a=e("#"+n.id+"-trigger-body"),d=0,l={click:function(o){if(!n.disabled&&!n.readOnly){var i=e(this),r=parseInt(i.attr("tid"))-1,s=t.__TriBtns[r],a=t.fireEvent("onTriggerBtnClick",[s,this,o]);return a===!1?!1:void 0}},dblclick:function(o){if(!n.disabled&&!n.readOnly){var i=e(this),r=parseInt(i.attr("tid"))-1,s=t.__TriBtns[r],a=t.fireEvent("onTriggerBtnDblClick",[s,this,o]);return a===!1?!1:void 0}},mouseenter:function(o){if(!n.disabled&&!n.readOnly){var i=e(this),r=parseInt(i.attr("tid"))-1,s=t.__TriBtns[r],a=t.fireEvent("onTriggerBtnOver",[s,this,o]);return a===!1?!1:void i.addClass("nex-form-trigger-btn-over")}},mouseleave:function(o){if(!n.disabled&&!n.readOnly){var i=e(this),r=parseInt(i.attr("tid"))-1,s=t.__TriBtns[r],a=t.fireEvent("onTriggerBtnOut",[s,this,o]);return a===!1?!1:void i.removeClass("nex-form-trigger-btn-over")}},mousedown:function(o){if(!n.disabled&&!n.readOnly){var i=e(this),r=parseInt(i.attr("tid"))-1,s=t.__TriBtns[r],a=t.fireEvent("onTriggerBtnDown",[s,this,o]);if(a===!1)return!1;i.addClass("nex-form-trigger-btn-down"),d=setTimeout(function(){d=0,e(document).one("mouseup",function(){i.removeClass("nex-form-trigger-btn-down")})},0)}},mouseup:function(o){if(!n.disabled&&!n.readOnly){var i=e(this),r=parseInt(i.attr("tid"))-1,s=t.__TriBtns[r],a=t.fireEvent("onTriggerBtnUp",[s,this,o]);if(a===!1)return!1;i.removeClass("nex-form-trigger-btn-down"),d&&(clearTimeout(d),d=0)}}},u={click:function(e){e.stopPropagation(),e.preventDefault(),n.disabled||n.readOnly||r.trigger("click",[e])},mouseenter:function(e){n.disabled||n.readOnly||r.trigger("mouseenter",[e])},mouseleave:function(e){n.disabled||n.readOnly||r.trigger("mouseleave",[e])},mousedown:function(t){n.disabled||n.readOnly||(r.trigger("mousedown",[t]),e(this).hasClass("nex-form-placeholder")||e(this).hasClass("nex-form-inner-label")?r.trigger("focus",[t]):n.triggerToFocus&&r.trigger("focus",[t]),t.stopPropagation(),t.preventDefault())},mouseup:function(e){e.stopPropagation(),e.preventDefault(),n.disabled||n.readOnly||r.trigger("mouseup",[e])}};t._bindInputEvent(),s.undelegate(">.nex-form-placeholder").delegate(">.nex-form-placeholder",u),a.undelegate(">.nex-form-trigger-btn").delegate(">.nex-form-trigger-btn",l),a.bind(u),o.undelegate('[id="'+n.id+'-label-td"]').delegate('[id="'+n.id+'-label-td"]',u),i.undelegate(">.nex-form-outer-trigger-td >.nex-form-outer-trigger-body >.nex-form-trigger-btn").delegate(">.nex-form-outer-trigger-td >.nex-form-outer-trigger-body >.nex-form-trigger-btn",l)},__TriBtns:[],addInnerTriggerBtn:function(t,n,o){var i=this,r=i.configs,s=e(o?o:"#"+r.id+"-trigger-body"),a=i.__TriBtns.push(t),d={text:"",icon:"",cls:"",iconCls:"",callBack:null,callback:null,handler:null};if("string"===e.type(t)||"number"===e.type(t)){var l=t+"";t=e.extend({},d,{text:l})}else for(var u in d)u in t||(t[u]=d[u]);var c=['<div id="'+r.id+"-inner-trigger-"+a+'" tid="'+a+'" class="nex-form-trigger-btn '+(t.icon||t.iconCls?"nex-form-trigger-has-icon":"")+" "+t.cls+'">'];if(t.icon||t.iconCls){var f=t.icon?'style="background-image:url('+t.icon+')"':"";c.push('<span class="nex-form-trigger-icon '+t.iconCls+'" '+f+"></span>")}c.push("</div>");var h=e(c.join(""));return h.prependTo(s).bind("click",function(o){return r.disabled||r.readOnly?void 0:e.isFunction(n)?n.call(i,t,o):e.isFunction(t.callBack)?t.callBack.call(i,t,o):e.isFunction(t.callback)?t.callback.call(i,t,o):e.isFunction(t.handler)?t.handler.call(i,t,o):void 0}),r.triggerBtnSelection||h.disableSelection(),Nex.isXtype(t)||Nex.isClass(t)?i.renderComponent(t.text,h):Nex.isInstance(t)?h.append(t.getDom()):i.renderComponent(t.text,h),a},removeInnerTriggerBtn:function(t){var n=this,o=n.configs;return"undefined"==typeof t?n:(t=parseInt(t)-1,n.__TriBtns[t]=null,e("#"+o.id+"-inner-trigger-"+t).remove(),Nex.gc(),n)},addOuterTriggerBtn:function(t,n){var o=this,i=o.configs,r=i.id+"-outer-trigger-body",s=e("#"+r+"-td");if(s.length)var a=s;else{var a=[];a.push('<td valign="'+i.labelvAlign+'" id="'+r+'-td" align="'+i.labelAlign+'" class="nex-form-outer-trigger-td">'),a.push('<div id="'+r+'" class="nex-form-outer-trigger-body"></div>'),a.push("</td>");var a=e(a.join("")),d=e("#"+i.id+"-inputRow td:last");d.after(a)}var l=o.addInnerTriggerBtn(t,n,e("#"+i.id+"-outer-trigger-body"));return a.attr(i.id+"-outer-trigger-td-"+l),o.resetViewSize(),l},removeOuterTriggerBtn:function(t){var n=this,o=n.configs;return n.removeInnerTriggerBtn(t),e("#"+o.id+"-outer-trigger-td-"+t).remove(),n.resetViewSize(),n},_disabled:function(){var e=this,t=e.configs,n=e.getInput(),o=e.getDom();return t.disabled=!0,n.attr("disabled",!0),o.addClass("nex-form-disabled"),t.disabledCls&&o.addClass(t.disabledCls),e},disabled:function(){var e=this,t=e.configs;return e._disabled(),e.fireEvent("onDisabled",[t]),e},_enable:function(){var e=this,t=e.configs,n=e.getInput(),o=e.getDom();return t.disabled=!1,n.attr("disabled",!1),o.removeClass("nex-form-disabled"),t.disabledCls&&o.removeClass(t.disabledCls),e},enable:function(){var e=this,t=e.configs;return e._enable(),e.fireEvent("onEnable",[t]),e},_readOnly:function(e){var t,n=this,o=n.getInput(),i=n.getDom(),r=n.configs,e=e===t?!0:e;return r.readOnly=e,o.attr("readonly",e),e?(n.fireEvent("onReadOnly",[r]),i.addClass("nex-form-readonly"),r.readonlyCls&&i.addClass(r.readonlyCls)):(n.fireEvent("onUnReadOnly",[r]),i.removeClass("nex-form-readonly"),r.readonlyCls&&i.removeClass(r.readonlyCls)),n},readOnly:function(e){var t,n=this,o=n.configs,e=e===t?!0:e;return n._readOnly(e),e?n.fireEvent("onReadOnly",[o]):n.fireEvent("onUnReadOnly",[o]),n},setValidError:function(){var t=this,n=t.configs,o=e("#"+n.id);t.resetVaildCss(),o.addClass(n.validErrorCls)},setValidSuccess:function(){var t=this,n=t.configs,o=e("#"+n.id);t.resetVaildCss(),o.addClass(n.validSuccessCls)},resetVaildCss:function(){var t=this,n=t.configs,o=e("#"+n.id);o.removeClass(n.validErrorCls),o.removeClass(n.validSuccessCls)},_setFocusCls:function(e,t){var n=this,o=n.configs;if(!o.disabled&&!o.readOnly){var i=n.el;i.addClass("nex-form-focus"),o.focusCls&&i.addClass(o.focusCls)}},_unsetFocusCls:function(e,t){var n=this,o=n.configs;if(!o.disabled&&!o.readOnly){var i=n.el;i.removeClass("nex-form-focus"),o.focusCls&&i.removeClass(o.focusCls)}},_setOverCls:function(t,n){var o=this,i=o.configs;if(!i.disabled&&!i.readOnly){var r=o.el;r.addClass("nex-form-over"),e(">.nex-form-inner",r).addClass("nex-form-inner-over"),i.overCls&&r.addClass(i.overCls)}},_unsetOverCls:function(t,n){var o=this,i=o.configs;if(!i.disabled&&!i.readOnly){var r=o.el;r.removeClass("nex-form-over"),e(">.nex-form-inner",r).removeClass("nex-form-inner-over"),i.overCls&&r.removeClass(i.overCls)}},_autoValid:function(){var e=this,t=e.configs;t._ct&&clearTimeout(t._ct),t._ct=setTimeout(function(){e.checkVal(),t._ct=0},t.autoValidDelay)},hidden:function(){return this.hide()},focus:function(){var e=this;try{e.getInput().focus()}catch(t){}},select:function(){var e=this;try{e.getInput().select()}catch(t){}},selectText:function(e,t){var n,o,i=this,r=(i.configs,i.val()),s=i.getInput().get(0);r.length>0&&(e=e===n?0:e,t=t===n?r.length:t,s.setSelectionRange?s.setSelectionRange(e,t):s.createTextRange&&(o=s.createTextRange(),o.moveStart("character",e),o.moveEnd("character",t-r.length),o.select())),i.focus()},blur:function(){var e=this;try{e.getInput().blur()}catch(t){}},checkVal:function(){for(var t,n=this,o=n.configs,i=!0,r=e.isArray(o.rules)?o.rules:[o.rules],s=Nex.getUtil("Validate"),a=n.val(),d=[],l=0;l<r.length;l++)if(t=r[l],e.isFunction(t))d.push({method:t,rule:null,params:null});else if(e.isPlainObject(t))for(var u in t)e.isFunction(t[u])?d.push({method:t[u],rule:u,params:null}):u in s&&e.isFunction(s[u])&&d.push({method:s[u],rule:u,params:t[u]});else"string"==typeof t&&t in s&&e.isFunction(s[t])&&d.push({method:s[t],rule:t,params:null});for(var c=null,f=0,h=d.length;h>f;f++){var p=d[f],g=[a];if(null!==p.params&&g.push(p.params),i=p.method.apply(s,g),i===!1){c=null===p.rule?null:p.rule;break}}if(i===!1){var m=o.messages[c]||o.validErrorMsg;n.fireEvent("onValidError",[m,c])}else n.fireEvent("onValidSuccess",[o.validSuccessMsg]);return i},isValid:function(){return this.checkVal()},valid:function(){return this.checkVal()},reset:function(){var e=this,t=e.configs;t.value=t._value,e.setValue(t.value),e.blur(),clearTimeout(t._ct),e.resetVaildCss()},refreshFormater:function(){var t,n=this,o=n.C();if(e.isFunction(o.formater)){var i=n.val(),r=o.formater.call(n,i);i=r===t?i:r,n.val(i)}},refreshRenderer:function(t,n){var o=this,i=o.C();if(!e.isPlainObject(i.renderer)||!e.isEmptyObject(i.renderer)){var r=o.val();o.val(r)}},rendererEncode:function(t){var n,o=this,i=this.configs,r=i.renderer,s="";return e.isPlainObject(r)&&e.isEmptyObject(r)?t:(e.isFunction(r)?(s=o.tpl(r,t),s===n&&(s=t)):s=e._isPlainObject(r)?t in r?o.tpl(r[t],t):i.rendererDef in r?o.tpl(r[i.rendererDef],t):t:t,i._renderer[s]=t,s)},rendererDecode:function(t){var n=this,o=n.C();if(e.isPlainObject(o.renderer)&&e.isEmptyObject(o.renderer))return t;var i="";return i=t in o._renderer?o._renderer[t]:t},validTipEl:null,_showValidTip:function(t){var n=this,o=this.configs,t=(this.getBody(),this._undef(t,o.position));switch(n.validTipEl||(n.validTipEl=e('<div id="'+o.id+'_tooltip" class=""nex-form-tooltip></div>')),t){case"right":break;case"left":break;case"top":break;case"bottom":}},getDropDownItems:function(){var e=this.configs;return e.items||[]},getDropDownItemDefault:function(){var t=this.configs;return e.extend({},t.itemDefault,t.dropdownItemDefault)},setItems:function(e){return this.setDropDownItems.apply(this,arguments)},setDropDownItems:function(t){var n=this,o=this.configs;t&&(o.items=e.isArray(t)?[].concat(t):t),1==o.dropdownMode&&e.isArray(o.items)&&e.each(o.items,function(e,t){o.items[e]=n._parseItemData(t)});var i=this.getDropDown();return i.length&&t&&this.resetDropDownList(o.items),o.items},getItemData:function(e,t){return this.getDropDownItemData(e,t)},getItemIndex:function(e){return this.getDropDownItemData(e,!1)},getItemDataById:function(e){return this.getDropDownItemDataById(e)},getDropDownShowAt:function(){return this.getInput()},getDropDownSelectedValue:function(){return this.val()},_setDropDownValue:function(t,n,o){{var i=this;i.configs}o.selected=!0;var r=e.extend({},o);return i.val(t,n,r),i}})}),$define(["Nex.form.AbstractForm"],function(){var e=Nex.define("Nex.form.Display","Nex.form.AbstractForm",{alias:"Nex.DisplayField",xtype:"displayfield"});e.setOptions(function(e){return{__inputType:"display",containerCls:[e.containerCls,"nex-form-display"].join(" "),cleanBtn:!1}})}),$define(["Nex.form.AbstractForm"],function(){var e=Nex.define("Nex.form.Text","Nex.form.AbstractForm",{alias:"Nex.TextField",xtype:"textfield"});e.setOptions(function(e){var t=e.tpl;return t.inputTpl='<input <%=attrs%> id="<%=id%>-input" type="<%=type%>" name="<%=name%>" autocomplete="<%=autocomplete%>" tabindex=<%=tabIndex%> value="" class="nex-form-field nex-form-field-<%=type%>" />',{__inputType:"text",containerCls:[e.containerCls,"nex-form-text"].join(" "),cleanBtn:!0,tpl:t}})}),$import(["Nex.form.Text"],function(){Nex.define("Nex.form.Trigger","Nex.form.Text",{alias:"Nex.TriggerField",xtype:"triggerfield",configs:function(e){return{__inputType:"text",containerCls:[e.containerCls,"nex-form-trigger"].join(" "),_inputCls:[],cleanBtn:!1,triggerToFocus:!1,triggerCls:"",triggerIconCls:""}},sysEvents:function(){{var e=this;e.configs}return e.bind("onSetFormView._sys",e._setInputCls,e),e.callParent(arguments),e},_setSysTriggerBtns:function(){{var e=this;e.configs}return e._setTriggerBtn(),e.callParent(arguments),e},_setTriggerBtn:function(){var e=this,t=e.configs;e.addInnerTriggerBtn({name:"trigger",cls:["nex-form-triggerfield-trigger",t.triggerCls].join(" "),iconCls:["nex-form-triggerfield-icon",t.triggerIconCls].join(" "),callBack:function(n,o){var i=e.fireEvent("onTriggerClick",[t])}})},_setInputCls:function(){var e=this,t=e.configs,n=$.isArray(t._inputCls)?t._inputCls:[t._inputCls],o=["nex-form-field-trigger"].concat(n);$("#"+t.id+"-input").addClass(o.join(" "))}})}),$define(["Nex.form.Trigger"],function(){Nex.define("Nex.form.Select","Nex.form.Trigger",{alias:"Nex.SelectField",xtype:"selectfield",configs:function(e){var t=e.tpl;return t.inputTpl='<div <%=attrs%> id="<%=id%>-input" type="<%=type%>" tabindex=<%=tabIndex%> autocomplete="<%=autocomplete%>" value="" class="nex-form-field nex-form-field-<%=type%>"></div><input id="<%=id%>-input-real" type="hidden" value="" name="<%=name%>" />',{__inputType:"select",containerCls:[e.containerCls,"nex-form-select"].join(" "),cleanBtn:!1,triggerToFocus:!0,tpl:t,dropdownSingleSelect:!0}},sysEvents:function(){{var e=this;e.configs}return e.callParent(arguments),e.bind("onClick._sys",e._showDropDownClick,e),e.bind("onCreateDropDwon._sys",e._setDropDownCls,e),e},_setTriggerBtn:function(){var e=this,t=e.configs,n=e.getInput();e.addInnerTriggerBtn({name:"trigger",cls:["nex-form-triggerfield-trigger","nex-form-select-trigger",t.triggerCls].join(" "),iconCls:["nex-form-triggerfield-icon","nex-form-select-icon",t.triggerIconCls].join(" "),callBack:function(o,i){var r=e.fireEvent("onTriggerClick",[t]);r!==!1&&(t.triggerToFocus||n.trigger("focus",[i]))}})},_showDropDownClick:function(){{var e=this;e.configs}e.toggleDropDown()},_setDropDownCls:function(e){var t=this,n=(t.configs,t.el);n.hasClass("nex-form-focus")?e.addClass("nex-form-select-dropdown-focus"):e.removeClass("nex-form-select-dropdown-focus")},_getItemData2:function(e){var t=this,n=t.configs,o=n.items,i=null;return $.each(o.concat(t.__CItems),function(t,o){if($.isPlainObject(o)){var r=o[n.valueKey];return String(r)===String(e)?(i=o,!1):void 0}}),i},__inputreal:null,getInputReal:function(){var e=this,t=e.configs;return e.__inputreal=e.__inputreal?e.__inputreal:$("#"+t.id+"-input-real"),e.__inputreal},setInputValue:function(e,t){var n=this,o=n.configs,t=n._undef(t,null),i=o.multiSplit;if(n.callParent(arguments),null===t){var r=[];e=(e+"").split(i),$.each(e,function(t,i){var s=n._getItemData2(i);r.push(s?s[o.textKey]:e)}),t=r.join(i)}return n.setInputText(t),n},setDropDownItems:function(e,t){var n=this,o=this.configs;if(n.callParent(arguments),2==o.dropdownMode)return o.items;var i=o.multiSplit,r=this.getInputValue();r=r.split(i);var s=[];$.isArray(o.items)&&$.each(r,function(e,t){var n=t;$.each(o.items,function(e,i){var r=i[o.valueKey];return String(r)===String(t)?(n=i[o.textKey],!1):void 0}),s.push(n)});var t=this._undef(t,!0);return t&&this.setInputText(s.join(i)),o.items}})}),$define(["Nex.form.AbstractForm"],function(){var e=Nex.define("Nex.form.Textarea","Nex.form.AbstractForm",{alias:"Nex.TextareaField",xtype:"textareafield",sysEvents:function(){{var e=this;e.configs}e.callParent(arguments),e.bind("onSetViewSize._sys",e._setTextareaHeight,e)},_setTextareaHeight:function(){var e=this,t=e.configs,n=t.views.container,o=e.getInput();return o._outerHeight(n.height()),e}});e.setOptions(function(e){var t=e.tpl;return t.inputTpl='<textarea <%=attrs%> id="<%=id%>-input" type="<%=type%>" name="<%=name%>" autocomplete="<%=autocomplete%>" tabindex=<%=tabIndex%> class="nex-form-field nex-form-field-<%=type%>"></textarea>',{__inputType:"textarea",containerCls:[e.containerCls,"nex-form-textarea"].join(" "),cleanBtn:!0,height:60,labelvAlign:"top",tpl:t}})}),$define(["Nex.form.Text"],function(){var e=Nex.define("Nex.form.Hidden","Nex.form.Text",{alias:"Nex.HiddenField",xtype:"hiddenfield"});e.setOptions(function(e){return{__inputType:"hidden",containerCls:[e.containerCls,"nex-form-hidden"].join(" "),width:"auto",height:"auto",showLabel:!1,cleanBtn:!1}})}),$define(["Nex.form.Text"],function(){var e=Nex.define("Nex.form.Password","Nex.form.Text",{alias:"Nex.PasswordField",xtype:"passwordfield"});e.setOptions(function(e){return{__inputType:"password",containerCls:[e.containerCls,"nex-form-password"].join(" "),cleanBtn:!0}})}),$import(["Nex.form.Text"],function(){"use strict";Nex.define("Nex.form.ComboBox","Nex.form.Text",{alias:"Nex.ComboBox Nex.ComboBoxField",xtype:"combobox comboboxfield",configs:function(e){return{__inputType:"text",containerCls:[e.containerCls,"nex-form-combobox"].join(" "),_inputCls:[],triggerToFocus:!0,triggerCls:"",triggerIconCls:""}},sysEvents:function(){{var e=this;e.configs}return e.bind("onSetFormView._sys",e._setInputCls,e),e.callParent(arguments),e},_setSysTriggerBtns:function(){var e=this,t=e.configs,n=e.getInput();return e.addInnerTriggerBtn({cls:["nex-form-combobox-trigger",t.triggerCls].join(" "),iconCls:["nex-form-combobox-icon",t.triggerIconCls].join(" "),callBack:function(e,o){t.triggerToFocus||n.trigger("focus",[o])}}),e.callParent(arguments),e},_setInputCls:function(){var e=this,t=e.configs,n=$.isArray(t._inputCls)?t._inputCls:[t._inputCls],o=["nex-form-field-combobox"].concat(n);$("#"+t.id+"-input").addClass(o.join(" "))}})}),$define(["Nex.form.Display"],function(){Nex.define("Nex.form.Radio","Nex.form.Display",{alias:"Nex.RadioField",xtype:"radiofield",configs:function(e){e.tpl;return{__inputType:"radio",containerCls:[e.containerCls,"nex-form-radio"].join(" "),showPlaceholder:!1,triggerBtnsPosition:"outer",radioLabelSelection:!1,labelvAlign:"top",width:"auto",itemDefault:{},items:[]}},initFormField:function(){{var e=this;this.configs}e.initBoxItems(),e.callParent(arguments)},initBoxItems:function(){var e=this,t=this.configs;if(e._setRadios(t.items),e._setRadioEvents(),!t.radioLabelSelection){var n=e.getInput();n.disableSelection()}},_bindEvent:function(){var e=this,t=this.configs;e.callParent(arguments);var n=$("#"+t.id+"-input");n.unbind("focus blur").bind({focus2:function(o){if(!t.disabled&&!t.readOnly&&!n.hasClass("nex-form-field-focus")){e._focusValue=$(this).val(),n.addClass("nex-form-field-focus"),$("#"+t.id).addClass("nex-form-focus");var i=e.fireEvent("onFocus",[this,o]);return i===!1?!1:void 0}},blur2:function(o){if(!t.disabled&&!t.readOnly){var i=e._focusValue,r=$(this).val();n.removeClass("nex-form-field-focus"),$("#"+t.id).removeClass("nex-form-focus"),i!==r&&(t.value=r,e.fireEvent("onChange",[r,i]));var s=e.fireEvent("onBlur",[this,o]);return s===!1?!1:void 0}}})},_setRadios:function(e){var t=this,n=this.configs,o=t.getInput(),i=[],r=n.valueKey,s=n.textKey,e=t._undef(e,n.items);if(!$.isArray(e))return t;for(var a=e.length,d=0;a>d;d++){var l=t._parseItemData(e[d]);e[d]=l;var u=$.extend({cls:"",readOnly:!1,disabled:!1,display:"inline",width:"auto"},n.itemDefault,l);u.id=e[d].__id,i.push(t.isSplitLine(u)?t.tpl(n.dropdownItemSplitLineTpl,u):'<span id="'+u.id+'" tabindex="'+ ++Nex.tabIndex+'" class="nex-form-radio-item nex-form-radio-item-d-'+u.display+" "+(u.readOnly?"nex-form-radio-item-readonly":"")+" "+(u.disabled?"nex-form-radio-item-disabled":"")+" "+u.cls+'" value="'+encodeURIComponent(u[r])+'" style="'+(isNaN(parseInt(u.width))?"":"width:"+parseInt(u.width)+"px")+'"><span id="'+n.id+'-radio-icon" class="nex-form-radio-icon"></span><span class="nex-form-radio-text">'+u[s]+"</span></span>")}return o.html(i.join("")),t},resetRadios:function(e){var t=this,n=this.configs,o=t.getValue();return $.isArray(e)?(n.items=e,t._setRadios(e),t.checked(o,!1),t):t},setItems:function(e){return this.resetRadios.apply(this,arguments)},_setRadioEvents:function(){var e=this,t=this.configs,n=e.getInput(),o=function(n,o,i,r){if(!t.disabled&&!t.readOnly){var s=$(this),a=s.attr("id"),d=e.getItemDataById(a);if(!d.disabled&&!d.readOnly){var l;return $.isFunction(d[o])&&(l=d[o].call(e,d),l===!1)?!1:(l=e.fireEvent(n,[d[t.valueKey],d,this,i]),l===!1?!1:void($.isFunction(r)&&r.call(this,d)))}}},i=0,r=0;n.undelegate(">.nex-form-radio-item").delegate(">.nex-form-radio-item",{click:function(n){if(!t.disabled&&!t.readOnly){var i,r=$(this),s=r.attr("id"),a=e.getItemDataById(s);if(!a.disabled&&!a.readOnly)return $.isFunction(a.callBack)&&(i=a.callBack.call(e,a,n)),$.isFunction(a.callback)&&i!==!1&&(i=a.callback.call(e,a,n)),$.isFunction(a.handler)&&i!==!1&&(i=a.handler.call(e,a,n)),i!==!1&&(i=o.call(this,"onRaidoClick","click",n)),i===!1?!1:void(r.hasClass("nex-form-radio-item-checked")||e.setValue(a[t.valueKey]))}},dblclick:function(e){return o.call(this,"onRaidoDblClick","dblclick",e)},mouseenter:function(e){var t=o.call(this,"onRaidoOver","mouseover",e,function(e){e.disabled||e.readOnly||$(this).addClass("nex-form-radio-item-over")});return t===!1?!1:void 0},mouseleave:function(e){var t=o.call(this,"onRaidoOut","mouseout",e,function(e){e.disabled||e.readOnly||$(this).removeClass("nex-form-radio-item-over")});return t===!1?!1:void 0},mousedown:function(e){if(!t.disabled&&!t.readOnly){var n=o.call(this,"onRaidoMouseDown","mousedown",e,function(e){if(!e.disabled&&!e.readOnly){$(this).addClass("nex-form-radio-item-down");var t=$(this);i=setTimeout(function(){i=0,$(document).one("mouseup",function(){t.removeClass("nex-form-radio-item-down")})},0)}});return n===!1?!1:void 0}},mouseup:function(e){var t=o.call(this,"onRaidoMouseUp","mouseup",e,function(e){
e.disabled||e.readOnly||($(this).removeClass("nex-form-radio-item-down"),i&&(clearTimeout(i),i=0))});return t===!1?!1:void 0},focus:function(e){n.trigger("focus2",[e]),r&&(clearTimeout(r),r=0)},blur:function(e){r=setTimeout(function(){r=0,n.trigger("blur2",[e])},0)}})},getCheckedLength:function(){var e=this,t=(this.configs,e.getInput());return $(">.nex-form-radio-item-checked",t).length},_unchecked:function(){var e=this,t=(this.configs,e.getInput());return $(">.nex-form-radio-item",t).removeClass("nex-form-radio-item-checked"),e},_uncheckedAll:function(){var e=this,t=this.configs,n=Nex.FormManager.get(t.name,t.group);return $.each(n,function(e,n){if(n._unchecked&&n._unchecked(),n.configs.id!==t.id){var o=n.getValue();n.getCheckedLength&&n.getCheckedLength()&&n.fireEvent("onChange",["",o])}}),e},unchecked:function(){return this.setValue(""),this},checked:function(e,t){var n=this,t=(this.configs,n.getInput(),n._undef(t,!0)),o=n.getItemData(e);o=$.isArray(o)?o[0]:o,o&&(t&&n._uncheckedAll(),$("#"+o.__id).addClass("nex-form-radio-item-checked"))},setRadioDisabled:function(e,t,n){var o=this,t=(this.configs,o._undef(t,!0)),n=o._undef(n,"disabled"),i=o.getItemData(e);return i=$.isArray(i)?i[0]:i,i&&(t?($("#"+i.__id).addClass("nex-form-radio-item-"+n),"disabled"===n?i.disabled=!0:"readonly"===n?i.readOnly=!0:i[n]=!0):($("#"+i.__id).removeClass("nex-form-radio-item-"+n),"disabled"===n?i.disabled=!1:"readonly"===n?i.readOnly=!1:i[n]=!1)),o},unsetRadioDisabled:function(e){return this.setRadioDisabled.apply(this,[e,!1])},setRadioReadOnly:function(){return this.setRadioDisabled.apply(this,[value,!0,"readonly"])},unsetRadioReadOnly:function(){return this.setRadioDisabled.apply(this,[value,!1,"readonly"])},getInputValue:function(){var e=this,t=(this.configs,e.getInput()),n=$(">.nex-form-radio-item-checked",t),o="";return n.length&&(o=decodeURIComponent(n.attr("value"))||""),o},setInputValue:function(e){{var t=this;this.configs}return t.checked(e),t},getInputText:function(){var e=this,t=this.configs,n=e.getInputValue(),o=e.getItemData(n);return o=$.isArray(o)?o[0]:o,o?o[t.textKey]:""},setInputText:function(e){var t=this,n=this.configs,o="";return $.each(n.items,function(t,i){return i[n.textKey]===e?(o=i[n.valueKey],!1):void 0}),t.setValue(o),t}})}),$define(["Nex.form.Radio"],function(){Nex.define("Nex.form.Checkbox","Nex.form.Radio",{alias:"Nex.CheckboxField",xtype:"checkboxfield",configs:function(e){return{__inputType:"checkbox",containerCls:[e.containerCls,"nex-form-checkbox"].join(" "),checkboxLabelSelection:!1}},initBoxItems:function(){var e=this,t=this.configs;if(e._setCheckboxs(t.items),e._setCheckboxEvents(),!t.radioLabelSelection){var n=e.getInput();n.disableSelection()}},_setCheckboxs:function(e){var t=this,n=this.configs,o=t.getInput(),i=[],r=n.valueKey,s=n.textKey,e=t._undef(e,n.items);if(!$.isArray(e))return t;for(var a=e.length,d=0;a>d;d++){var l=t._parseItemData(e[d]);e[d]=l;var u=$.extend({cls:"",readOnly:!1,disabled:!1,display:"inline",width:"auto"},n.itemDefault,l);u.id=e[d].__id,i.push(t.isSplitLine(u)?t.tpl(n.dropdownItemSplitLineTpl,u):'<span id="'+u.id+'" tabindex="'+ ++Nex.tabIndex+'" class="nex-form-checkbox-item nex-form-checkbox-item-d-'+u.display+" "+(u.readOnly?"nex-form-checkbox-item-readonly":"")+" "+(u.disabled?"nex-form-checkbox-item-disabled":"")+" "+u.cls+'" value="'+encodeURIComponent(u[r])+'" style="'+(isNaN(parseInt(u.width))?"":"width:"+parseInt(u.width)+"px")+'"><span id="'+n.id+'-checkbox-icon" class="nex-form-checkbox-icon"></span><span class="nex-form-checkbox-text">'+u[s]+"</span></span>")}return o.html(i.join("")),t},resetCheckboxs:function(e){var t=this,n=this.configs,o=t.getValue();return $.isArray(e)?(n.items=e,t._setCheckboxs(e),t.setInputValue(o),t):t},setItems:function(e){return this.resetCheckboxs.apply(this,arguments)},_setCheckboxEvents:function(){var e=this,t=this.configs,n=e.getInput(),o=function(n,o,i,r){if(!t.disabled&&!t.readOnly){var s=$(this),a=s.attr("id"),d=e.getItemDataById(a);if(!d.disabled&&!d.readOnly){var l;return $.isFunction(d[o])&&(l=d[o].call(e,d),l===!1)?!1:(l=e.fireEvent(n,[d[t.valueKey],d,this,i]),l===!1?!1:void($.isFunction(r)&&r.call(this,d)))}}},i=0,r=0;n.undelegate(">.nex-form-checkbox-item").delegate(">.nex-form-checkbox-item",{click:function(n){if(!t.disabled&&!t.readOnly){var i,r=$(this),s=r.attr("id"),a=e.getItemDataById(s);if(!a.disabled&&!a.readOnly)return $.isFunction(a.callBack)&&(i=a.callBack.call(e,a,n)),$.isFunction(a.callback)&&i!==!1&&(i=a.callback.call(e,a,n)),$.isFunction(a.handler)&&i!==!1&&(i=a.handler.call(e,a,n)),i!==!1&&(i=o.call(this,"onCheckboxClick","click",n)),i===!1?!1:void(r.hasClass("nex-form-checkbox-item-checked")?e.unsetChecked(a[t.valueKey]):e.setChecked(a[t.valueKey]))}},dblclick:function(e){return o.call(this,"onRaidoDblClick","dblclick",e)},mouseenter:function(e){var t=o.call(this,"onRaidoOver","mouseover",e,function(e){e.disabled||e.readOnly||$(this).addClass("nex-form-checkbox-item-over")});return t===!1?!1:void 0},mouseleave:function(e){var t=o.call(this,"onRaidoOut","mouseout",e,function(e){e.disabled||e.readOnly||$(this).removeClass("nex-form-checkbox-item-over")});return t===!1?!1:void 0},mousedown:function(e){var t=o.call(this,"onRaidoMouseDown","mousedown",e,function(e){if(!e.disabled&&!e.readOnly){$(this).addClass("nex-form-checkbox-item-down");var t=$(this);i=setTimeout(function(){i=0,$(document).one("mouseup",function(){t.removeClass("nex-form-checkbox-item-down")})},0)}});return t===!1?!1:void 0},mouseup:function(e){var t=o.call(this,"onRaidoMouseUp","mouseup",e,function(e){e.disabled||e.readOnly||($(this).removeClass("nex-form-checkbox-item-down"),i&&(clearTimeout(i),i=0))});return t===!1?!1:void 0},focus:function(e){n.trigger("focus2",[e]),r&&(clearTimeout(r),r=0)},blur:function(e){r=setTimeout(function(){r=0,n.trigger("blur2",[e])},0)}})},getCheckedLength:function(){var e=this,t=(this.configs,e.getInput());return $(">.nex-form-checkbox-item-checked",t).length},_uncheckedAll:function(){var e=this,t=this.configs,n=e.getInput();return $(">.nex-form-checkbox-item",n).removeClass("nex-form-checkbox-item-checked"),$.each(t.items,function(e,t){t.checked=!1}),e},uncheckedAll:function(){return this.setValue(""),this},checkedAll:function(){var e=this,t=this.configs,n=[];return $.each(t.items,function(e,o){n.push(o[t.valueKey])}),e.setValue(n.join(t.multiSplit)),e},reverseChecked:function(){var e=this,t=this.configs,n=e.getValue();n=n.split(t.multiSplit);var o=[];return $.each(t.items,function(e,i){-1===$.inArray(i[t.valueKey],n)&&o.push(i[t.valueKey])}),e.setValue(o.join(t.multiSplit)),e},setCheckboxDisabled:function(e,t,n){var o=this,t=(this.configs,o._undef(t,!0)),n=o._undef(n,"disabled"),i=o.getItemData(e);return i=$.isArray(i)?i[0]:i,i&&(t?($("#"+i.__id).addClass("nex-form-checkbox-item-"+n),"disabled"===n?i.disabled=!0:"readonly"===n?i.readOnly=!0:i[n]=!0):($("#"+i.__id).removeClass("nex-form-checkbox-item-"+n),"disabled"===n?i.disabled=!1:"readonly"===n?i.readOnly=!1:i[n]=!1)),o},unsetCheckboxDisabled:function(e){return this.setCheckboxDisabled.apply(this,[e,!1])},setCheckboxReadOnly:function(e){return this.setCheckboxDisabled.apply(this,[e,!0,"readonly"])},unsetCheckboxReadOnly:function(e){return this.setCheckboxDisabled.apply(this,[e,!1,"readonly"])},_setChecked:function(e){this.setCheckboxDisabled.apply(this,[e,!0,"checked"])},setChecked:function(e){var t=this.getInputValue();this._setChecked(e);var n=this.getInputValue();return t!==n&&this.fireEvent("onChange",[n,t]),this},_unsetChecked:function(e){this.setCheckboxDisabled.apply(this,[e,!1,"checked"])},unsetChecked:function(e){var t=this.getInputValue();this._unsetChecked(e);var n=this.getInputValue();return t!==n&&this.fireEvent("onChange",[n,t]),this},getInputValue:function(){var e=this,t=this.configs,n=e.getInput(),o=$(">.nex-form-checkbox-item-checked",n),i=[];return o.length&&o.each(function(){i.push(decodeURIComponent($(this).attr("value")))}),i.join(t.multiSplit)},setInputValue:function(e){var t=this,n=this.configs;return t._uncheckedAll(),$.each((e+"").split(n.multiSplit),function(e,n){t._setChecked(n)}),t},getInputText:function(){var e=this,t=this.configs,n=e.getInputValue(),o=e.getItemData(n);o=$.isArray(o)?o:[o];var i=[];return $.each(o,function(e,n){i.push(n[t.textKey])}),i.join(t.multiSplit)},setInputText:function(e){var t=this,n=this.configs,o=[],e=e.split(n.multiSplit);return $.each(n.items,function(t,i){-1!==$.inArray(i[n.textKey],e)&&o.push(i[n.valueKey])}),t.setValue(o.join(n.multiSplit)),t}})}),$define(["Nex.form.Checkbox"],function(){Nex.define("Nex.form.SingleCheckbox","Nex.form.Checkbox",{alias:"Nex.SingleCheckboxField",xtype:"singlecheckboxfield",configs:function(e){return{__inputType:"singlecheckbox",containerCls:[e.containerCls,"nex-form-singlecheckbox"].join(" "),cleanBtn:!1,on:"1",off:"0",text:"",value:""}},_checkOptions:function(){var e=this.configs;this.callParent(arguments);var t=[{text:e.text,value:e.on}];return e.items=t,this},_setCheckboxs:function(){{var e=this;this.configs}return e.callParent(arguments),e},unchecked:function(){var e=this,t=this.configs;return e.setValue(t.off),this},checked:function(e,t){var n=this,o=this.configs;return n.setValue(o.on),n},getInputValue:function(){var e=this,t=this.configs,n=e.callParent(arguments);return n===t.on+""?t.on:t.off}})});